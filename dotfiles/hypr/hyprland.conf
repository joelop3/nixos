#source = ~/.config/hypr/myColors.conf

### MONITORS ###
#monitor=HDMI-A-1,highres@60,630x0,2
#monitor=DP-2,highres@165,2560x0,1,transform,1
#monitor=DP-2,highres@165,0x1440,1
#monitor=DP-3,highres@165,0x0,1
monitor=eDP-1,1920x1080@60,0x0,1

### PROGRAMS ###
$editor = code
$terminal = ghostty
$fileManagerTerminal = ghostty -e walk
$fileManager = dolphin
$browser = google-chrome-stable --ozone-platform=x11
$menu = walker

### AUTOSTART ###
exec-once = hyprpm reload -n
exec-once = hyprsunset
exec-once = nm-applet
exec-once = hyprpaper
exec-once = hypridle
exec-once = elephant
exec-once = walker --gapplication-service
exec-once = mako
exec-once = hyprpanel
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = v4l2loopback add /dev/video2
exec-once = wl-paste --type text --watch cliphist store
exec-once = systemctl --user start hyprpolkitagent
exec-once = udiskie
exec-once = gsettings set org.gnome.desktop.interface color-scheme "prefer-dark"
#exec-once = obs --startvirtualcam --minimize-to-tray
#exec-once = slack -u -s

### ENVIRONMENT VARIABLES ###
env = XCURSOR_SIZE,24
env = XCURSOR_THEME,Bibata-Modern-Classic
env = HYPRCURSOR_SIZE,24
env = HYPRCURSOR_THEME,Bibata-Modern-Classic
env = QT_QPA_PLATFORMTHEME,qt6ct

env = LIBVA_DRIVER_NAME,nvidia
env = XDG_SESSION_TYPE,wayland
env = GBM_BACKEND,nvidia-drm
env = __GLX_VENDOR_LIBRARY_NAME,nvidia
env = SDL_VIDEODRIVER,wayland

cursor {
	no_hardware_cursors = true
}

ecosystem {
  no_update_news = true
}

### LOOK AND FEEL ###
general {
    gaps_in = 2
    gaps_out = 4

    border_size = 2
    col.active_border = rgba(8a8a8aff) rgba(6b6b6bff) 45deg
    col.inactive_border = rgba(00000000)

    allow_tearing = true

    layout = dwindle
}

decoration {
  rounding = 16

  blur {
    enabled = false
    ignore_opacity = false
    size = 2
    passes = 3
	  brightness = .5
    xray = true
	  noise = 0
  }
  shadow{
    enabled = false
  }
}

animations {
	enabled = true

	bezier = linear, 0.0, 0.0, 1.0, 1.0
	animation = borderangle, 1, 100, linear, loop

	animation=workspaces,1,2,default
	animation=windows,1,2,default
}

xwayland {
    force_zero_scaling = true
}

dwindle {
    pseudotile = true
    preserve_split = true # You probably want this
}

master {
    new_status = "master"
    allow_small_split = true
    orientation  = top
}

misc {
    force_default_wallpaper = 1 # Set to 0 or 1 to disable the anime mascot wallpapers
    disable_hyprland_logo = true # If true disables the random hyprland logo / anime girl background. :(
}


### INPUT ###
input {
    kb_layout = us
    kb_variant =
    kb_model = sofle
    kb_options =
    kb_rules =

    follow_mouse = 1
    sensitivity = 0 # -1.0 - 1.0, 0 means no modification.

    touchpad {
        natural_scroll = true
    }
}


### WORKSPACES ###
#workspace = DP-2,1
#workspace = DP-3,11

### KEYBINDINGS ###
$mainMod = super
$secondaryMod = control
$thirdMod = shift
$comboMod = supershift

bind = $mainMod, TAB, hyprexpo:expo, toggle
bind = $mainMod, B, exec, $browser
bind = $mainMod, E, exec, $editor
bind = $mainMod, T, exec, $terminal
bind = $mainMod, Q, killactive,
bind = $mainMod, F, exec, $fileManager
bind = $mainMod, L, exec, hyprlock

#bind = $mainMod, O, togglefloating

bind = $mainMod, V, exec, cliphist list | walker -d -c 1 | cliphist decode | wl-copy
bind = $mainMod, C, exec, hyprpicker --autocopy
bind = $mainMod, P, exec, hyprshot -m region --clipboard-only -o /home/joel/descargas

bind = $mainMod, escape, exit
bind = $mainMod, slash, togglesplit
bind = $mainMod, F11, fullscreen

bind = $secondaryMod, SPACE, exec, $menu
bind = $secondaryMod, escape, exec, loginctl lock-session
bind = $comboMod, apostrophe, exec, wtype "Ã±"
bind = $mainMod, left, movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up, movefocus, u
bind = $mainMod, down, movefocus, d

bind = $mainMod, W, swapactiveworkspaces, DP-2 DP-3

bind = $mainMod, 1, split-workspace, 1
bind = $mainMod, 2, split-workspace, 2
bind = $mainMod, 3, split-workspace, 3
bind = $mainMod, 4, split-workspace, 4
bind = $mainMod, 5, split-workspace, 5

bind = $mainMod, i, split-workspace, +1
bind = $mainMod, k, split-workspace, -1

bind = $comboMod, 1, split-movetoworkspacesilent, 1
bind = $comboMod, 2, split-movetoworkspacesilent, 2
bind = $comboMod, 3, split-movetoworkspacesilent, 3
bind = $comboMod, 4, split-movetoworkspacesilent, 4
bind = $comboMod, 5, split-movetoworkspacesilent, 5

bind = $comboMod, i, split-movetoworkspacesilent, +1
bind = $comboMod, k, split-movetoworkspacesilent, -1

bind = $mainMod, m, togglespecialworkspace, magic
bind = $mainMod shift, m, movetoworkspace, special:magic

### CUSTOM BINDINGS ###
bind = $mainMod, mouse_down, split-cycleworkspaces, next
bind = $mainMod, mouse_up, split-cycleworkspaces, prev
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow
bind = $mainMod, mouse:274, killactive
bind = $mainMod, mouse:276, split-changemonitor, next

bind = $mainMod ALT, 3, exec, hyprctl keyword monitor HDMI-A-1, highres@60, 630x0, 2

bind = $comboMod ALT, 3, exec, hyprctl keyword monitor HDMI-A-1, disable


# 272 left
# 273 right
# 274 middle

# 276 M1
# 275 M2

### CUSTOM WINDOW RULES ###
windowrulev2 = float,initialTitle:()

windowrulev2 = float,initialClass:(it.mijorus.smile)
windowrulev2 = center,initialClass:(it.mijorus.smile)

windowrulev2 = float,initialTitle:(DevTools)
windowrulev2 = size 1200 800,initialTitle:(DevTools)

# Scrcpy
windowrulev2 = float,initialClass:(scrcpy)
windowrulev2 = center,initialClass:(scrcpy)
windowrulev2 = size 400 870,initialClass:(scrcpy)

# Xwayland floating fixed
windowrulev2 = noblur, floating:1

# HyprpolkitAgent
windowrulev2 = stayfocused,initialClass:(hyprpolkitagent)
windowrulev2 = pin,initialClass:(hyprpolkitagent)
windowrulev2 = dimaround,initialClass:(hyprpolkitagent)
windowrulev2 = persistentsize,initialClass:(hyprpolkitagent)

# Code
windowrulev2 = center,title:Visual Studio Code
windowrulev2 = suppressevent maximize, class:.*

# XWayland
windowrulev2 = opacity 0.0 override, class:^(xwaylandvideobridge)$
windowrulev2 = noanim, class:^(xwaylandvideobridge)$
windowrulev2 = noinitialfocus, class:^(xwaylandvideobridge)$
windowrulev2 = maxsize 1 1, class:^(xwaylandvideobridge)$
windowrulev2 = noblur, class:^(xwaylandvideobridge)$

plugin {
  hyprexpo {
    columns = 2
    gap_size = 5
    bg_col = rgb(000000)
    skip_empty = true
    enable_gesture = true
    workspace_method = center 1
    gesture_fingers = 3
    gesture_distance = 300
    gesture_positive = true
  }
  split-monitor-workspaces{
    count = 4
  }
}
